<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet name="./../resources/css/default.css"/>
        <h:outputStylesheet name="./../resources/css/cssLayout.css"/>
        <title>Registro de Usuario</title>
    </h:head>
    
    <h:body>

        <ui:composition template="./../WEB-INF/template/plantilla.xhtml">

            <ui:define name="content">
                
                <h:form>  
                    
                    <p:messages id="mensaje" autoUpdate="false" closable="true" severity="info, fatal, warn"
                                showDetail="true"/>
                    
                    <h:panelGrid id="panelDatos" columns="3" style="margin: auto">        
                        
                        <p:outputLabel for="nombre" value="Nombre:" />
                        <p:inputText id="nombre" required="true" requiredMessage="Nombre obligatorio" 
                                    value="#{usuarioController.usuario.nombre}" />
                        <p:message for="nombre"/>
                        
                        <p:outputLabel for="ape1" value="Apellido 1:" />
                        <p:inputText id="ape1" required="true" requiredMessage="Apellido 1 obligatorio" 
                                    value="#{usuarioController.usuario.apellido1}" />
                        <p:message for="ape1"/>

                        <p:outputLabel for="ape2" value="Apellido 2:" />
                        <p:inputText id="ape2" required="true" requiredMessage="Apellido 2 obligatorio" 
                                    value="#{usuarioController.usuario.apellido2}" />
                        <p:message for="ape2"/>
                        
                        <p:outputLabel for="dni" value="DNI:" />
                        <p:inputMask id="dni" required="true" mask="99999999a" requiredMessage="DNI obligatorio" 
                                    value="#{usuarioController.usuario.dni}"/>
                        <p:message for="dni"/>
                        
                        <p:outputLabel for="email" value="Email: " />
                        <p:inputMask id="email" required="true" mask="aaaaa@aaaaaa.aa" requiredMessage="Email obligatorio" 
                                     value="#{usuarioController.usuario.email}"/>
                        <p:message for="email"/>
                        
                        <p:outputLabel for="nomUsuario" value="Usuario:" />
                        <p:inputText id="nomUsuario" required="true" requiredMessage="Nombre de usuario obligatorio" 
                                    value="#{usuarioController.usuario.usuario}"/>
                        <p:message for="nomUsuario"/>

                        <p:outputLabel for="pass1" value="Password:" />
                        <p:password id="pass1" required="true" value="#{usuarioController.usuario.password}" match="pass2" 
                                    feedback="true" promptLabel="Introduce una contraseña" validatorMessage="Las contraseñas no coinciden"
                                    requiredMessage="Contraseña obligatoria"
                                    weakLabel="Débil" goodLabel="Buena" strongLabel="Fuerte"/>
                        <p:message for="pass1"/>
                        
                        <p:outputLabel for="pass2" value="Repita password:" />
                        <p:password id="pass2" required="true" requiredMessage="Repite la contraseña" />
                        <p:message for="pass2"/>
                        
                        <p:outputLabel value="Rol:" />
                        <p:selectOneMenu value="#{usuarioController.usuario.rol}" required="true">
                            <f:selectItem itemLabel="Empleado" itemValue="E" />
                            <f:selectItem itemLabel="Supervisor" itemValue="S" />
                        </p:selectOneMenu>

                    </h:panelGrid>

                    <h:panelGrid columns="1" style="margin: 0 auto">
                        <p:commandButton icon="ui-icon-check" value="Registrar" update="panelDatos, mensaje"
                                         actionListener="#{usuarioController.registrar()}"/>
                    </h:panelGrid>
                   
                </h:form>
                
            </ui:define>

        </ui:composition>
        
    </h:body>
</html>
